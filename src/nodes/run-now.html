<script type="text/javascript">
    RED.nodes.registerType('sip-run-now',{
        category: 'SIP irrigation',
        color: '#32A620',
        defaults: {
            name: {value:""},
            program: {value:""}
        },
        inputs:1,
        outputs:1,
        icon:"time-watch-whte.svg",
        paletteLabel:"run now",
        label: function() {
            return this.name||"run now";
        }    
    })
</script>

<script type="text/html" data-template-name="sip-run-now">
    <div class="form-row">
        <label for="node-input-run-now"><i class="fa fa-tag"></i> Name</label>
        <input type="text" id="node-input-run-now" placeholder="Name">
    </div>

    <div class="form-row">
        <label for="node-input-program"><i class="fa fa-tag"></i> Program</label>
        <input type="text" id="node-input-program" placeholder="program">
    </div>


    <div class="form-tips"><b>Tip: </b> Program can be a program number, or name in quotes (case sensitive).</div>
</script>

<script type="text/markdown" data-help-name="sip-run-now">
Run a SIP irrigation program.

### Inputs
The **program** field can be a **program number**, or a **program name** in quotes (case sensitive).  
Input from another node can be a **JSON** payload that has a property of **"runNow"**.  
- If the **run now** property has the value **true**, the program from the **program field** will be run.  
- If the **run now** property has the value of a **program number** or a **program name** the program indicated by the input will be run.  
for example {"runNow": (program)}  
where (program) is a program number or a case sensitive program name in quotes.  
- A dashboard button may be used to provide input.  
for example:  
{"runNow": 1} will run rogram number 1.  

### Outputs
The output message is sent to SIP thrugh a **http request** node configured with the **POST** Method and the SIP **URL** followed by **/jsin**.    
For example: if node-red and SIP are running on the same raspberry Pi, the URL would be **localhost/jsin**. 

### References
 - [GitHub](https://github.com/Dan-in-CA/node-red-contrib-sip-irrigation) - the SIP irrgation nodes repository
 - [SIP GitHub](https://github.com/Dan-in-CA/sip) - the SIP software repository
</script>

