<script type="text/javascript">
    RED.nodes.registerType('sip-run-once',{
        category: 'SIP irrigation',
        color: '#32A620',
        defaults: {
            name: {value:""},
    		runOnce: {value:""},
    		preempt: {value:1}
        },
        inputs:1,
        outputs:1,
        icon:"run-once-white.svg",
//        align: 'right',
        paletteLabel:"run once",
        label: function() {
            return this.name||"run once";
        }
    });
</script>

<script type="text/html" data-template-name="sip-run-once">
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i>Name</label>
        <input type="text" id="node-input-name" placeholder="Name">
    </div>

    <div class="form-row">
        <label for="node-input-runOnce"><i class="fa fa-hand-o-up"></i>Run once</label>
        <input type="text" id="node-input-runOnce" placeholder="">
    </div>

    <div class="form-row">
        <label for="node-input-preempt">Preempt</label>
        <input type="checkbox" id="node-input-preempt" checked>
    </div>


    <div class="form-tips">
		<p><b>Tip:</b> Enter stations to be run in the fllowing format: [&lt;station (number or name)&gt;, &lt;time (seconds)&gt;] e.g. [1, 30]</p>
        <p>Uncheck the Preempt check box to allow stations to run concurrently with an already running program.</p>  
	</div>
</script>

<script type="text/markdown" data-help-name="sip-run-once">
 Run one or more SIP stations for specified time durations (seconds).

### Inputs
One or more stations to be run with times in seconds in the following format:  
**[(station), (seconds)]**  
For example [1, 30] to run station 1 for 30 seconds.  
Multiple stations can be scheduled with each seperated by a comma:  
[1, 30], [2, 30] to run stations 1 and 2 for 30 seconds each.  
Station can be a station **number** or a **station name**.  
If using station names, be sure to enter the case sensitive name in quotes. for example:  
**["My station", 30]**
### Outputs
The output message is sent to SIP thrugh a **http request** node configured with **POST** as Method and the SIP **URL** followed by */jsin**.  
For example: if node-red and SIP are running on the same raspberry Pi, the URL would be **localhost/jsin**.  

### References
 - [GitHub](https://github.com/Dan-in-CA/node-red-contrib-sip-irrigation) - the SIP irrigation nodes repository
 - [SIP GitHub](https://github.com/Dan-in-CA/sip) - the SIP software repository
</script>

